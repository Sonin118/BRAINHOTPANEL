-- paneilnokey.lua
-- Painel Fleisch (carregado pelo loader após key válida)

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Remote dos comandos (ajuste o caminho se necessário)
local remote = ReplicatedStorage:WaitForChild("Packages"):WaitForChild("Net"):WaitForChild("RE/AdminPanelService/ExecuteCommand")

-- Comandos em sequência
local comandos = {
    "ragdoll","balloon","jail","morph","jumpscare","inverse","tiny","rocket",
}

local function executarComandos(playerName)
    if not playerName or playerName == "" then return end
    task.spawn(function()
        for _, cmd in ipairs(comandos) do
            local nomeConsulta = playerName
            if type(nomeConsulta) == "string" and string.sub(nomeConsulta, 1, 1) == "@" then
                nomeConsulta = string.sub(nomeConsulta, 2)
            end
            local alvo = Players:FindFirstChild(nomeConsulta)
            if alvo then
                if cmd == "rocket" then task.wait(3) end
                remote:FireServer(alvo, cmd)
            end
            task.wait(0.25)
        end
    end)
end

-- Evita duplicar UI
local old = playerGui:FindFirstChild("CmdUI")
if old then old:Destroy() end

-- ===== UI =====
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "CmdUI"
screenGui.ResetOnSpawn = false
screenGui.DisplayOrder = 999
screenGui.Parent = playerGui

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 200, 0, 250)
frame.Position = UDim2.new(1, -220, 0.5, 100)
frame.BackgroundColor3 = Color3.fromRGB(14,17,22)
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true
frame.Parent = screenGui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 15)
corner.Parent = frame

local frameStroke = Instance.new("UIStroke")
frameStroke.Thickness = 1
frameStroke.Color = Color3.fromRGB(70, 70, 100)
frameStroke.Transparency = 0.3
frameStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
frameStroke.Parent = frame

local header = Instance.new("Frame")
header.Size = UDim2.new(1, 0, 0, 40)
header.BackgroundColor3 = Color3.fromRGB(14,17,22)
header.BorderSizePixel = 0
header.Parent = frame

local headerCorner = Instance.new("UICorner")
headerCorner.CornerRadius = UDim.new(0, 15)
headerCorner.Parent = header

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, -20, 1, 0)
title.Position = UDim2.new(0, 10, 0, 0)
title.BackgroundTransparency = 1
title.Text = "FleischPanel"
title.TextColor3 = Color3.fromRGB(255,255,255)
title.Font = Enum.Font.GothamBold
title.TextSize = 18
title.TextXAlignment = Enum.TextXAlignment.Left
title.Parent = header

-- Minimizar (CTRL)
local isMinimized = false
local function toggleMinimize()
    if isMinimized then
        frame.Visible = true
        isMinimized = false
    else
        frame.Visible = false
        isMinimized = true
    end
end

UserInputService.InputBegan:Connect(function(input, gp)
    if gp then return end
    if input.KeyCode == Enum.KeyCode.LeftControl or input.KeyCode == Enum.KeyCode.RightControl then
        toggleMinimize()
    end
end)

-- Lista de jogadores (scroll)
local scrolling = Instance.new("ScrollingFrame")
scrolling.Size = UDim2.new(1, -20, 1, -60)
scrolling.Position = UDim2.new(0, 10, 0, 60)
scrolling.BackgroundColor3 = Color3.fromRGB(14,17,22)
scrolling.BorderSizePixel = 0
scrolling.ScrollBarThickness = 8
scrolling.ScrollBarImageColor3 = Color3.fromRGB(100,100,120)
scrolling.CanvasSize = UDim2.new(0, 0, 0, 0)
scrolling.AutomaticCanvasSize = Enum.AutomaticSize.Y
scrolling.Parent = frame

local scrollCorner = Instance.new("UICorner")
scrollCorner.CornerRadius = UDim.new(0, 10)
scrollCorner.Parent = scrolling

local listLayout = Instance.new("UIListLayout")
listLayout.Parent = scrolling
listLayout.Padding = UDim.new(0, 8)
listLayout.SortOrder = Enum.SortOrder.LayoutOrder

local padding = Instance.new("UIPadding")
padding.PaddingTop = UDim.new(0, 8)
padding.PaddingBottom = UDim.new(0, 8)
padding.PaddingLeft = UDim.new(0, 8)
padding.PaddingRight = UDim.new(0, 8)
padding.Parent = scrolling

local function criarBotao(playerObj)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, -16, 0, 40)
    btn.BackgroundColor3 = Color3.fromRGB(14,17,22)
    btn.Text = ""
    btn.BorderSizePixel = 0
    btn.AutoButtonColor = false
    btn.Parent = scrolling

    local cornerBtn = Instance.new("UICorner")
    cornerBtn.CornerRadius = UDim.new(0, 10)
    cornerBtn.Parent = btn

    local btnStroke = Instance.new("UIStroke")
    btnStroke.Thickness = 1
    btnStroke.Color = Color3.fromRGB(70, 70, 100)
    btnStroke.Transparency = 0.4
    btnStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    btnStroke.Parent = btn

    local playerName = Instance.new("TextLabel")
    playerName.Size = UDim2.new(1, -50, 1, 0)
    playerName.Position = UDim2.new(0, 10, 0, 0)
    playerName.BackgroundTransparency = 1
    playerName.Text = playerObj.Name
    playerName.TextColor3 = Color3.fromRGB(255,255,255)
    playerName.Font = Enum.Font.GothamBold
    playerName.TextSize = 14
    playerName.TextXAlignment = Enum.TextXAlignment.Left
    playerName.Parent = btn

    local hoverTween = TweenService:Create(btn, TweenInfo.new(0.15, Enum.EasingStyle.Sine, Enum.EasingDirection.Out), { BackgroundColor3 = Color3.fromRGB(24, 28, 36) })
    local unhoverTween = TweenService:Create(btn, TweenInfo.new(0.2, Enum.EasingStyle.Sine, Enum.EasingDirection.Out), { BackgroundColor3 = Color3.fromRGB(14, 17, 22) })

    btn.MouseEnter:Connect(function() hoverTween:Play() end)
    btn.MouseLeave:Connect(function() unhoverTween:Play() end)

    btn.MouseButton1Click:Connect(function()
        executarComandos(playerObj.Name)
    end)
end

local function atualizarLista()
    for _, child in ipairs(scrolling:GetChildren()) do
        if child:IsA("TextButton") then child:Destroy() end
    end
    local jogadores = {}
    for _, p in ipairs(Players:GetPlayers()) do
        if p ~= player then table.insert(jogadores, p) end
    end
    for _, p in ipairs(jogadores) do
        criarBotao(p)
    end
end

task.spawn(function()
    while screenGui.Parent do
        atualizarLista()
        task.wait(2)
    end
end)

atualizarLista()

print("[FLEISH] painel carregado.")

